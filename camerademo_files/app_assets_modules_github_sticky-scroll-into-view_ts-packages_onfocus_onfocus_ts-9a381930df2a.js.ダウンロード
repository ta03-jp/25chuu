"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["app_assets_modules_github_sticky-scroll-into-view_ts-packages_onfocus_onfocus_ts"],{81151:(t,e,n)=>{n.d(e,{Sz:()=>f,Z:()=>d,kn:()=>u});var i=n(31803),o=n(97797);let s="ontransitionend"in window;function l(t){return"height"===getComputedStyle(t).transitionProperty}function r(t,e){t.style.transition="none",e(),t.offsetHeight,t.style.transition=""}var a=n(95493);function c(t,e){if(t.classList.toggle("open",e),t.classList.toggle("Details--on",e),e){let e=t.querySelector(".js-details-initial-focus");e&&setTimeout(()=>{e.focus()},0)}for(let n of[...t.querySelectorAll(".js-details-target")].filter(e=>e.closest(".js-details-container")===t))n.setAttribute("aria-expanded",e.toString()),n.hasAttribute("data-aria-label-open")&&n.hasAttribute("data-aria-label-closed")&&n.setAttribute("aria-label",e?n.getAttribute("data-aria-label-open"):n.getAttribute("data-aria-label-closed"))}function u(t,e){let n=t.getAttribute("data-details-container")||".js-details-container",i=t.closest(n),o=e?.force??!i.classList.contains("open"),u=e?.withGroup??!1;!function(t,e){if(!s)return e();let n=Array.from(t.querySelectorAll(".js-transitionable"));for(let e of(t.classList.contains("js-transitionable")&&n.push(t),n)){let t=l(e);e instanceof HTMLElement&&(e.addEventListener("transitionend",()=>{e.style.display="",e.style.visibility="",t&&r(e,function(){e.style.height=""})},{once:!0}),e.style.boxSizing="content-box",e.style.display="block",e.style.visibility="visible",t&&r(e,function(){e.style.height=getComputedStyle(e).height}),e.offsetHeight)}for(let t of(e(),n))if(t instanceof HTMLElement&&l(t)){let e=getComputedStyle(t).height;t.style.boxSizing="","0px"===e?t.style.height=`${t.scrollHeight}px`:t.style.height="0px"}}(i,()=>{c(i,o);let e=u?function(t,e){let n=t.getAttribute("data-details-container-group");return n?((0,a._H)(t,()=>{for(let i of[...document.querySelectorAll(".js-details-container")].filter(t=>t.getAttribute("data-details-container-group")===n))i!==t&&c(i,e)}),n):null}(i,o):null;Promise.resolve().then(()=>{[".js-focus-on-dismiss","input[autofocus], textarea[autofocus]"].find(t=>{let e=Array.from(i.querySelectorAll(t)).findLast(t=>"none"!==window.getComputedStyle(t).display);if(e&&document.activeElement!==e)return e.focus(),!0}),t.classList.contains("tooltipped")&&(t.classList.remove("tooltipped"),t.addEventListener("mouseleave",()=>{t.classList.add("tooltipped"),t.blur()},{once:!0})),i.dispatchEvent(new CustomEvent("details:toggled",{bubbles:!0,cancelable:!1,detail:{open:o}})),e&&i.dispatchEvent(new CustomEvent("details:toggled-group",{bubbles:!0,cancelable:!1,detail:{open:o,group:e}}))})})}function d(t){let e=t.getAttribute("data-details-container")||".js-details-container",n=t.closest(e).classList;return n.contains("Details--on")||n.contains("open")}function f(t){let e=!1,n=t.parentElement;for(;n;)n.classList.contains("Details-content--shown")&&(e=!0),n.classList.contains("js-details-container")&&(n.classList.toggle("open",!e),n.classList.toggle("Details--on",!e),e=!1),n=n.parentElement}(0,o.on)("click",".js-details-target",function(t){let e=t.altKey;u(t.currentTarget,{withGroup:e}),t.preventDefault()}),(0,i.A)(function({target:t}){t&&f(t)})},31803:(t,e,n)=>{n.d(e,{A:()=>r});var i=n(34095),o=n(82591);let s=[],l=0;function r(t){!async function(){s.push(t),await i.G,function(){let t=l;l=s.length,a(s.slice(t),null,window.location.href)}()}()}function a(t,e,n){let i=window.location.hash.slice(1),o={oldURL:e,newURL:n,target:i?document.getElementById(i):null};for(let e of t)e.call(null,o)}r.clear=()=>{s.length=l=0};let c=window.location.href;window.addEventListener("popstate",function(){c=window.location.href}),window.addEventListener("hashchange",function(t){let e=window.location.href;try{a(s,t.oldURL||c,e)}finally{c=e}});let u=null;document.addEventListener(o.z.START,function(){u=window.location.href}),document.addEventListener(o.z.SUCCESS,function(){a(s,u,window.location.href)})},20943:(t,e,n)=>{n.d(e,{L:()=>s});var i=n(21403),o=n(81151);function s(){let t=document.querySelector("[data-skipped-to-content]");return!!t&&(t.removeAttribute("data-skipped-to-content"),!0)}(0,i.lB)(".js-skip-to-content",t=>{t.addEventListener("focus",t=>{let e=t.currentTarget;if("true"===e.getAttribute("data-skip-target-assigned"))return;let n=document.querySelector("main");if(n||(n=document.querySelector("#skip-to-content")?.nextElementSibling),!n)return;let i=n.getAttribute("id");i||(i="main-content",n.setAttribute("id",i)),e.setAttribute("href",`#${i}`),e.setAttribute("data-skip-target-assigned","true")}),t.addEventListener("click",t=>{let e=t.currentTarget.getAttribute("href");if(!e)return;let n=document.querySelector(e);n&&(n.setAttribute("tabindex","-1"),n.setAttribute("data-skipped-to-content","1"),n.focus())})});let l="ontouchstart"in document,r=document.querySelectorAll(".js-header-menu-item");for(let t of r)t.addEventListener("details:toggled",t=>{let e=t.target;if(t instanceof CustomEvent&&t.detail.open)for(let t of r)t!==e&&(0,o.kn)(t,{force:!1})}),l||t.addEventListener("mouseleave",t=>{let e=t.target;e.classList.contains("open")&&(0,o.kn)(e,{force:!1})});document.addEventListener("context-region-label:update",t=>{if(t instanceof CustomEvent&&t.detail.label)for(let e of document.querySelectorAll(".js-context-region-label"))e.textContent=t.detail.label}),document.addEventListener("turbo:before-cache",t=>{for(let e of t.target.querySelectorAll("dialog[open], modal-dialog[open]"))e.close()}),(0,i.lB)("qbsearch-input",()=>{document.addEventListener("qbsearch-input:expand",()=>{document.body.setAttribute("blackbird-search-active","true")}),document.addEventListener("qbsearch-input:close",()=>{document.body.setAttribute("blackbird-search-active","false"),document.body.style.overflow=""})})},5507:(t,e,n)=>{n.d(e,{Jd:()=>l,MG:()=>s,zG:()=>r});let i=0,o=new Set;function s(t){t(i),o.add(t)}function l(){return i}function r(t){for(let e of(i=t,t?document.body.style.setProperty("--base-sticky-header-height",`${t}px`):document.body.style.removeProperty("--base-sticky-header-height"),o))e(t)}},21042:(t,e,n)=>{let i;n.d(e,{D:()=>r});var o=n(21403);let s=0,l=new ResizeObserver(t=>{for(let e of t){let t=e.target;if(t instanceof HTMLElement){let n=t.ownerDocument.documentElement,o=e.contentRect.height;o!==s&&(i&&cancelAnimationFrame(i),i=requestAnimationFrame(()=>{n.style.setProperty("--observed-header-height",`${o}px`),s=o}))}}});function r(){return s}(0,o.lB)(".js-observe-sticky-header-height",{constructor:HTMLElement,add(t){l.observe(t)}})},74209:(t,e,n)=>{n.d(e,{K:()=>d});var i=n(20943),o=n(34095),s=n(21403),l=n(5507);let r=!1,a=!1,c=[];function u(){c.length?r||(window.addEventListener("resize",f),document.addEventListener("scroll",f),r=!0):(window.removeEventListener("resize",f),document.removeEventListener("scroll",f),r=!1)}function d(){p(!0)}function f(){p()}function p(t=!1){for(let e of c)if(e.element.offsetHeight>0){let{element:n,placeholder:i,top:o}=e,s=n.getBoundingClientRect();if(i){let l=i.getBoundingClientRect();n.classList.contains("is-stuck")?l.top>L(n,o)?m(e):y(e):s.top<=L(n,o)?g(e):t&&y(e)}else s.top-L(n,o)<.1?g(e):m(e)}}function g({element:t,placeholder:e,top:n}){if(e){let i=t.getBoundingClientRect();A(t,L(t,n)),t.style.left=`${i.left}px`,t.style.width=`${i.width}px`,t.style.marginTop="0",t.style.position="fixed",e.style.display="block"}t.classList.add("is-stuck")}function m({element:t,placeholder:e}){e&&(t.style.position="static",t.style.marginTop=e.style.marginTop,e.style.display="none"),t.classList.remove("is-stuck")}function y({element:t,placeholder:e,offsetParent:n,top:o}){if(e&&!(0,i.L)()){let i=t.getBoundingClientRect(),s=e.getBoundingClientRect();if(A(t,L(t,o)),t.style.left=`${s.left}px`,0!==s.width&&(t.style.width=`${s.width}px`),n){let e=n.getBoundingClientRect();e.bottom<i.height+parseInt(String(o))&&(t.style.top=`${e.bottom-i.height}px`)}}}async function h(t){await o.K,requestAnimationFrame(()=>{t.isConnected&&(!function(t){let e=function(t){if(function(t){let{position:e}=window.getComputedStyle(t);return/sticky/.test(e)}(t))return null;let e=t.previousElementSibling;if(e&&e.classList.contains("is-placeholder"))return e;let n=document.createElement("div");return n.style.visibility="hidden",n.style.display="none",n.style.height=window.getComputedStyle(t).height,n.className=t.className,n.classList.remove("js-sticky"),n.classList.add("is-placeholder"),t.parentNode.insertBefore(n,t)}(t),n=window.getComputedStyle(t).position;t.style.position="static";let i=t.offsetParent;t.style.position="fixed";let o=w(t),s={element:t,placeholder:e,offsetParent:i,top:"auto"===o?0:parseInt(o||"0")};t.style.position=n,c.push(s)}(t),p(),u())}),a||(window.dispatchEvent(new CustomEvent("sticky-header-rendered")),a=!0)}async function b(t){if(null===t.offsetParent)return;await o.K;let e=Math.floor(t.getBoundingClientRect().height);e>0&&((0,l.zG)(e),v(),d())}function v(){for(let t of document.querySelectorAll(".js-position-sticky, .js-notification-shelf-offset-top"))E(t)}function E(t){if(t.classList.contains("js-notification-top-shelf"))return;let e=parseInt(w(t))||0,n=t.classList.contains("js-second-sticky-header")?0:(0,l.Jd)();A(t,e+n)}function w(t){let e=t.getAttribute("data-original-top");if(null!=e)return e;let n=window.getComputedStyle(t).top;return t.setAttribute("data-original-top",n),n}function L(t,e){return t.classList.contains("js-notification-top-shelf")?e:e+(0,l.Jd)()}function A(t,e){t.style.setProperty("top",`${e}px`,"important")}(0,s.lB)(".js-sticky",{constructor:HTMLElement,add(t){h(t)},remove(t){let e=c.map(t=>t.element).indexOf(t);c.splice(e,1),u()}}),(0,s.lB)(".js-notification-top-shelf",{constructor:HTMLElement,add(t){b(t)},remove(){(0,l.Jd)()>0&&((0,l.zG)(0),v(),d())}}),(0,s.lB)(".js-notification-shelf-offset-top, .js-position-sticky",{constructor:HTMLElement,add:E})},36186:(t,e,n)=>{function i(t,e=location.hash){return o(t,s(e))}function o(t,e){return""===e?null:t.getElementById(e)||t.getElementsByName(e)[0]}function s(t){try{return decodeURIComponent(t.slice(1))}catch{return""}}n.d(e,{gX:()=>s,rG:()=>i,w$:()=>o})},1330:(t,e,n)=>{n.d(e,{GO:()=>u,Oc:()=>d,Rt:()=>c});var i=n(36186),o=n(74209),s=n(5507),l=n(21042),r=n(69599),a=n(34095);async function c(t){if(t.hasAttribute("data-ignore-sticky-scroll"))return;let e=(0,r.G7)("new_scroll_into_view"),n=t.ownerDocument;if(e&&n&&n.defaultView){await a.K,t.scrollIntoView();let e=n.querySelector(".secondary-sticky-header");e?n.defaultView.scrollBy(0,-d(n)-e.clientHeight):n.defaultView.scrollBy(0,-d(n))}else setTimeout(async()=>{n&&n.defaultView&&(t.scrollIntoView(),n.defaultView.scrollBy(0,-d(n)))},0)}function u(t){let e=(0,i.rG)(t);e&&c(e)}function d(t){if((0,r.G7)("new_scroll_into_view"))return(0,s.Jd)()+(0,l.D)();{(0,o.K)();let e=t.querySelectorAll(".js-sticky-offset-scroll"),n=t.querySelectorAll(".js-position-sticky");return Math.max(0,...Array.from(e).map(t=>{let{top:e,height:n}=t.getBoundingClientRect();return 0===e?n:0}))+Math.max(0,...Array.from(n).map(t=>{let{top:e,height:n}=t.getBoundingClientRect(),i=parseInt(getComputedStyle(t).top);if(!t.parentElement)return 0;let o=t.parentElement.getBoundingClientRect().top;return e===i&&o<0?n:0}))+Array.from(t.querySelectorAll(".js-position-sticky-stacked")).reduce((t,e)=>{let{height:n,top:i}=e.getBoundingClientRect(),o=e.classList.contains("is-stuck");return t+(!(i<0)&&o?n:0)},0)}}},87363:(t,e,n)=>{n.d(e,{Ff:()=>a,eC:()=>c,uE:()=>r});var i=n(6986);let o=!1,s=new i.A;function l(t){let e=t.target;if(e instanceof HTMLElement&&e.nodeType!==Node.DOCUMENT_NODE)for(let t of s.matches(e))t.data.call(null,e)}function r(t,e){o||(o=!0,document.addEventListener("focus",l,!0)),s.add(t,e),document.activeElement instanceof HTMLElement&&document.activeElement.matches(t)&&e(document.activeElement)}function a(t,e,n){function i(e){let o=e.currentTarget;o&&(o.removeEventListener(t,n),o.removeEventListener("blur",i))}r(e,function(e){e.addEventListener(t,n),e.addEventListener("blur",i)})}function c(t,e){function n(t){let{currentTarget:i}=t;i&&(i.removeEventListener("input",e),i.removeEventListener("blur",n))}r(t,function(t){t.addEventListener("input",e),t.addEventListener("blur",n)})}},82591:(t,e,n)=>{n.d(e,{z:()=>i});let i=Object.freeze({INITIAL:"soft-nav:initial",START:"soft-nav:start",REPLACE_MECHANISM:"soft-nav:replace-mechanism",SUCCESS:"soft-nav:success",ERROR:"soft-nav:error",FRAME_UPDATE:"soft-nav:frame-update",END:"soft-nav:end",RENDER:"soft-nav:render",PROGRESS_BAR:{START:"soft-nav:progress-bar:start",END:"soft-nav:progress-bar:end"}})}}]);
//# sourceMappingURL=app_assets_modules_github_sticky-scroll-into-view_ts-packages_onfocus_onfocus_ts-161e436c2830.js.map